<?php    //initializations	spl_autoload_register(		function($class){			require_once'../classes/'.$class.'.php';		}	);	session_start(Config::get('session/options'));	//end of initializatons        $url = new Url();    $mgt = new Management();    $staff = new Staff();    $std = new Student();    $adm = new Admission();    $user = null;    if($mgt->isRemembered()){        $user = $mgt;    }    if($staff->isRemembered()){        $user = $staff;    }    if($std->isRemembered()){        $user = $std;    }    if($adm->isRemembered()){        $user = $adm;    }	if(!isset($user)){ //ensure user is legally logged in		Redirect::to('index.php'); //redirect to exam index	}      $user_col = $user->getUsernameColumn();    $username = strtoupper($user->data()->$user_col);    $exam = new Exam();    $examinerRank = ''; //initialized so it is accessible by the view script link down the page    if(Input::submitted('get') && !empty(Input::get('examid'))){        $examId = Utility::escape(Input::get('examid'));        $examineeId = Utility::escape(Input::get('examineeid'));        if(!empty(Input::get('examinerrank'))){            $examinerRank = Utility::escape(Input::get('examinerrank'));                        switch($examinerRank){                case 2:                    $table = Config::get('users/table_name3');                    $column = Config::get('users/username_column3');                break;                case 4:                    $table = Config::get('users/table_name3');                    $column = Config::get('users/username_column3');                break;                case 5:                    $table = Config::get('users/table_name1');                    $column = Config::get('users/username_column1');                break;                case 17:                    $table = Config::get('users/table_name1');                    $column = Config::get('users/username_column1');                break;                case 7:                    $table = Config::get('users/table_name2');                    $column = Config::get('users/username_column2');                break;                case 15:                    $table = Config::get('users/table_name2');                    $column = Config::get('users/username_column2');                break;            }        }else{            $rank = $rank = $user->getRank();            switch($rank){                case 1;                case 2;                case 3;                case 4;                case 5;                case 6;                case 17; //islamiyah HOS                    $table = Config::get('users/table_name0');                    $column = Config::get('users/username_column0');                break;                case 7;                case 8;                case 15;                case 16;                    $table = Config::get('users/table_name1');                    $column = Config::get('users/username_column1');                break;                case 9;                case 10;                    $table = Config::get('users/table_name2');                    $column = Config::get('users/username_column2');                break;                case 11;                case 12;                    $table = Config::get('users/table_name3');                    $column = Config::get('users/username_column3');                break;            }        }                $comExamDetails = $exam->getCompletedExam($table, $column, $examId, $examineeId);        if(empty($comExamDetails)){            Redirect::to(404);        }        $examineeScores = json_decode($comExamDetails->marks, true);        $dbScores = $exam->getExamMarks($examId);        $examineeTotalScore = 0;        $dbTotalScore = 0;        foreach ($examineeScores as $qId=>$mark){            $examineeTotalScore += (int) $mark;            $dbTotalScore += $dbScores[$qId];        }                    }else{        Redirect::to(404);    }    function remark($val){        if($val){            return '<span class="success">Passed</span>';        }        return '<span class="failure">Failed</failed>';    }    ?><!DOCTYPE html><html lang="en">    <head>        <meta name="HandheldFriendly" content="True">        <meta name="viewport" content="width=device-width, initial-scale=1.0">        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">        <meta http-equiv="X-UA-Compatible" content="IE=edge">        <title>Result Page</title>        <link rel="stylesheet" type="text/css" href="styles/style.css" />        <link rel="stylesheet" type="text/css" href="styles/result.css" />    </head>    <body>        <?php require_once 'nav.inc.php'?>        <main>            <?php require_once 'header.inc.php'?>        <div class="sectionheader"><?php echo strtoupper($examId).' Result'?></div>        <div id="dispContainer">            <div class="label">Name:</div>            <div class="val"><?php echo Utility::escape(Utility::formatName($comExamDetails->fname, $comExamDetails->oname, $comExamDetails->lname))?></div>            <div class="label">ID:</div>            <div class="val"><?php echo Utility::escape($examineeId)?></div>            <div class="label">Exam ID:</div>            <div class="val"><?php echo Utility::escape(strtoupper($comExamDetails->exam_id)) ?></div>            <div class="label">Total No of Qtns:</div>            <div class="val"><?php echo Utility::escape($comExamDetails->total_no_of_qtn) ?></div>            <div class="label">Total No of Correct Ans:</div>            <div class="val"><?php echo Utility::escape($comExamDetails->no_cor_ans) ?></div>            <div class="label">Total No of Wrong Ans:</div>            <div class="val"><?php echo Utility::escape($comExamDetails->no_wrong_ans) ?></div>            <div class="label">Score:</div>            <div class="val"><?php echo $examineeTotalScore.' / '. $dbTotalScore ?></div>            <div class="label">Percentage Score:</div>            <div class="val"><?php echo Utility::escape(round($comExamDetails->ptg_score,2)) ?>%</div>            <div class="label">Remark:</div>            <div class="val"><?php echo remark($comExamDetails->passed) ?></div>        </div>        <div id="scriptLink"><a href="<?php echo 'script.php?examid='.$examId.'&examineeid='.$examineeId.'&examinerrank='.$examinerRank ?>"><i class="fa fa-eye"></i> view script</a></div>        </main>    </body></html>